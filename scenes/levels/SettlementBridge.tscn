[gd_scene load_steps=7 format=3 uid="uid://c53k15q2w8c1a"]

[ext_resource type="PackedScene" uid="uid://cpe46srqjmdh6" path="res://scenes/levels/DefensiveMicro.tscn" id="1_a26h3"]
[ext_resource type="PackedScene" uid="uid://dqh0xu88khxct" path="res://ui/WelcomeHome_Popup.tscn" id="2_5el12"]
[ext_resource type="Script" uid="uid://dafjxa85ci2rx" path="res://scripts/buildings/SettlementBridge.gd" id="2_c48a7"]
[ext_resource type="PackedScene" uid="uid://btovbm7r6nern" path="res://ui/Storefront_UI.tscn" id="3_vj45l"]

[sub_resource type="GDScript" id="GDScript_cwoii"]
script/source = "extends Resource

@export var treasury: Dictionary = {\"gold\": 0, \"wood\": 0, \"food\": 0, \"stone\": 0}

# Stores building data and position. Structure:
# {\"resource_path\": \"res://...\", \"grid_position\": Vector2i(x, y)}
@export var placed_buildings: Array[Dictionary] = []

# Stores unit type (path) and count (int)
# Example: {\"res://data/units/Unit_Raider.tres\": 3}
@export var garrisoned_units: Dictionary = {}
"

[sub_resource type="Resource" id="Resource_83qlv"]
script = SubResource("GDScript_cwoii")
treasury = {
"food": 100,
"gold": 1660,
"stone": 1225,
"wood": 1410
}
placed_buildings = Array[Dictionary]([{
"grid_position": Vector2i(25, 15),
"resource_path": "res://data/buildings/Bldg_GreatHall.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/LumberYard.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/Bldg_Wall.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/LumberYard.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/Bldg_Wall.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/LumberYard.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/LumberYard.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/LumberYard.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/LumberYard.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/LumberYard.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/LumberYard.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/Bldg_Wall.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/LumberYard.tres"
}, {
"grid_position": Vector2i(10, 15),
"resource_path": "res://data/buildings/LumberYard.tres"
}])
garrisoned_units = {
"res://data/units/Unit_PlayerRaider.tres": 4
}

[node name="SettlementBridge" type="Node"]
script = ExtResource("2_c48a7")
home_base_data = SubResource("Resource_83qlv")
welcome_popup_scene = ExtResource("2_5el12")

[node name="DefensiveMicro" parent="." instance=ExtResource("1_a26h3")]

[node name="UnitContainer" type="Node2D" parent="."]

[node name="UI" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="UI"]
anchors_preset = -1
offset_left = 19.0
offset_top = 16.0
offset_right = 328.0
offset_bottom = 39.0
text = "Click to build a Wall. Defend the Great Hall!"

[node name="Storefront_UI" parent="UI" instance=ExtResource("3_vj45l")]

[node name="RestartButton" type="Button" parent="UI"]
visible = false
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -84.0
offset_top = -15.5
offset_right = 84.0
offset_bottom = 15.5
grow_horizontal = 2
grow_vertical = 2
text = "Return to Settlement"

[node name="StartAttackButton" type="Button" parent="UI"]
anchors_preset = -1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -110.0
offset_right = -10.0
offset_bottom = 31.0
grow_horizontal = 0
text = "Start Attack"

[node name="StartRaidButton" type="Button" parent="UI"]
anchors_preset = -1
offset_left = 200.0
offset_top = 20.0
offset_right = 350.0
offset_bottom = 60.0
text = "World Map"
