[gd_scene load_steps=11 format=3 uid="uid://c1j8x0a4xfyvg"]

[ext_resource type="Script" uid="uid://dv4ktmb4jw6n6" path="res://scripts/utility/GridManager.gd" id="1_aaohu"]
[ext_resource type="Script" uid="uid://2iyfg3te1n3y" path="res://scripts/utility/GridVisualizer.gd" id="2_hrpxt"]
[ext_resource type="Script" uid="uid://bt4qo8hj2kpn0" path="res://tools/EditorOnly.gd" id="2_qdkuo"]
[ext_resource type="Script" uid="uid://cb2ldxc7vxxah" path="res://data/buildings/Base_Building.gd" id="3_qdkuo"]
[ext_resource type="Resource" uid="uid://bs1e1mgqnldwq" path="res://data/buildings/player_economy/GreatHall.tres" id="4_c0j6e"]
[ext_resource type="Resource" uid="uid://b2356vlfukf14" path="res://data/buildings/Bldg_Wall.tres" id="5_04n8u"]
[ext_resource type="Resource" uid="uid://ckedcnw210a8k" path="res://data/buildings/Monastery_Watchtower.tres" id="6_0tmrt"]
[ext_resource type="Resource" uid="uid://drx4sih8numo1" path="res://data/buildings/player_economy/LumberYard.tres" id="7_vy6il"]
[ext_resource type="Resource" uid="uid://y7xhmemltm28" path="res://data/buildings/Player_Farm.tres" id="8_48g0g"]
[ext_resource type="Resource" uid="uid://b7p70u4vm3uem" path="res://data/buildings/Monastery_Chapel.tres" id="9_dpnga"]

[node name="LevelDesignTemplate" type="Node2D"]

[node name="GridManager" type="Node" parent="."]
script = ExtResource("1_aaohu")
grid_width = 120
grid_height = 80

[node name="LevelDesignerTools" type="Node2D" parent="."]
script = ExtResource("2_qdkuo")

[node name="GridVisualizer" type="Node2D" parent="LevelDesignerTools"]
script = ExtResource("2_hrpxt")

[node name="ReferenceRect" type="ReferenceRect" parent="LevelDesignerTools/GridVisualizer"]
custom_minimum_size = Vector2(1920, 1280)
offset_right = 40.0
offset_bottom = 40.0
border_width = 4.0

[node name="Instructions (Won\'t be in final scene)" type="Label" parent="LevelDesignerTools"]
offset_right = 603.0
offset_bottom = 566.0
text = "--- LEVEL DESIGN WORKFLOW ---

1. SCENE SETUP:
   - Go to Scene > \"Save Scene As...\" immediately (e.g., designs/river_fort.tscn).
   - IMPORTANT: Your TERRAIN visuals are saved in this .tscn file.

2. TERRAIN (Visuals):
   - Select the 'TileMapLayer' node.
   - Use the TileMap editor to paint Ground, Water, and Decoration.
   - (Terrain does not export to the .tres file; it loads with the scene).

3. BUILDINGS (Data/Logic):
   - Expand the '_Palette' node (hidden by default).
   - Select a building -> Press Ctrl+D (Duplicate).
   - Drag the duplicate into 'BuildingContainer'.
   - Move it to the desired position on the grid.

4. EXPORT BUILDING DATA:
   - Open 'tools/LevelExporter.gd' in the Script Editor.
   - Update 'TARGET_SAVE_PATH' to your destination (e.g., res://data/settlements/river_fort.tres).
   - Run the script (File > Run or Ctrl+Shift+X).
   - This creates the data file used by the Raid System.

-----------------------------
(This label will disappear in-game)"

[node name="_Palette" type="Node2D" parent="LevelDesignerTools"]
visible = false

[node name="Civilian" type="Node2D" parent="LevelDesignerTools/_Palette"]

[node name="GreatHall_ref" type="StaticBody2D" parent="LevelDesignerTools/_Palette/Civilian"]
script = ExtResource("3_qdkuo")
data = ExtResource("4_c0j6e")

[node name="Lumber_ref" type="StaticBody2D" parent="LevelDesignerTools/_Palette/Civilian"]
script = ExtResource("3_qdkuo")
data = ExtResource("7_vy6il")

[node name="Farm_ref" type="StaticBody2D" parent="LevelDesignerTools/_Palette/Civilian"]
script = ExtResource("3_qdkuo")
data = ExtResource("8_48g0g")

[node name="Chapel_ref" type="StaticBody2D" parent="LevelDesignerTools/_Palette/Civilian"]
script = ExtResource("3_qdkuo")
data = ExtResource("9_dpnga")

[node name="Military" type="Node2D" parent="LevelDesignerTools/_Palette"]

[node name="Watchtower_ref" type="StaticBody2D" parent="LevelDesignerTools/_Palette/Military"]
script = ExtResource("3_qdkuo")
data = ExtResource("6_0tmrt")

[node name="Walls" type="Node2D" parent="LevelDesignerTools/_Palette"]

[node name="Wall_ref" type="StaticBody2D" parent="LevelDesignerTools/_Palette/Walls"]
script = ExtResource("3_qdkuo")
data = ExtResource("5_04n8u")

[node name="TileMapLayer" type="TileMapLayer" parent="."]

[node name="BuildingContainer" type="Node2D" parent="."]
